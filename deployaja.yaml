name: metabase
version: latest
description: Metabase Analytics Dashboard
container:
  image: ghcr.io/ditasetyakurniawan-droid/metabase:latest
  port: 3000
resources:
  cpu: 3500m
  memory: 3500mi       # cukup untuk booting dan operasi ringan
  replicas: 1
env:
  # Gunakan database eksternal supaya container tidak menyimpan data di disk
  - name: MB_DB_TYPE
    value: postgres
  - name: MB_DB_DBNAME
    value: metabase
  - name: MB_DB_PORT
    value: 5432
  - name: MB_DB_USER
    value: postgres
  - name: MB_DB_PASS
    value: supersecretpassword
  - name: MB_DB_HOST
    value: <POSTGRES_HOST>
  - name: MB_SITE_URL
    value: https://metabase.deployaja.id
envMap:
  domain_env: MB_SITE_URL

domain: metabase.deployaja.id
