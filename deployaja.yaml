name: metabase
version: latest
description: Metabase Analytics Dashboard

container:
  image: ghcr.io/ditasetyakurniawan-droid/metabase:latest
  port: 3000
  securityContext:
    allowPrivilegeEscalation: false
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    capabilities:
      drop: ["ALL"]
  ulimits:
    nofile:
      soft: 65535
      hard: 65535

resources:
  cpu: 2
  memory: 2Gi
  replicas: 1

dependencies:
  - name: postgresql
    type: POSTGRESQL
    version: '15'
    storage_size: 1Gi

env:
  - name: MB_SITE_URL
    value: https://metabase.deployaja.id

envMap:
  domain_env: MB_SITE_URL
  db_host_env: MB_DB_HOST
  db_port_env: MB_DB_PORT
  db_name_env: MB_DB_DBNAME
  db_user_env: MB_DB_USER
  db_pass_env: MB_DB_PASS
  db_type_env: MB_DB_TYPE

domain: metabase.deployaja.id
